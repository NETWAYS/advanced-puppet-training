!SLIDE small
# Inventory

    @@@Sh
    $ bolt inventory show --nodes agent-centos.localdomain
    agent-centos.localdomain
    1 target

`bolt inventory show` shows the list of targets an action would run on.


!SLIDE small
# Help Subsystem for Applications

    @@@Sh
    $ bolt --help
    Usage: bolt <subcommand> <action>
    
    Available subcommands:
      bolt command run <command>       Run a command remotely
      bolt file upload <src> <dest>    Upload a local file or directory
      bolt script run <script>         Upload a local script and run it remotely
      bolt task show                   Show list of available tasks
      bolt task show <task>            Show documentation for task
      bolt task run <task> [params]    Run a Puppet task
      bolt plan convert <plan_path>    Convert a YAML plan to a Puppet plan
      bolt plan show                   Show list of available plans
      bolt plan show <plan>            Show details for plan
      bolt plan run <plan> [params]    Run a Puppet task plan
      bolt apply <manifest>            Apply Puppet manifest code
      bolt puppetfile install          Install modules from a Puppetfile into a Boltdir
      bolt puppetfile show-modules     List modules available to Bolt
      bolt secret createkeys           Create new encryption keys
      bolt secret encrypt <plaintext>  Encrypt a value
      bolt secret decrypt <encrypted>  Decrypt a value
      bolt inventory show              Show the list of targets an action would run on
    
    Run `bolt <subcommand> --help` to view specific examples.


!SLIDE small
# Tasks

Tasks can be created using `pdk`, with the subcommand `new`:

`pdk new task ping`

This creates both a .sh, but you can change this to any kind of script you want:

    @@@Sh
    /puppetlabs/bolt/modules/{MODULE NAME}/tasks/init.sh
    #!/bin/sh
    
    ping -c 4 8.8.8.8

Additonaly there is a .json file, which gives some additional information for your task:

    @@@Sh
    /puppetlabs/bolt/modules/{MODULE NAME}/taks/init.json
    {
      "puppet_task_version": 1,
      "supports_noop": false,
     "description": "Runs a simple ping command.",
      "parameters": {
      }
    }
!SLIDE small
# Tasks
    
    @@@Sh
    $ bolt task show
    facts                    Gather system facts
    package                  Manage and inspect the state of packages
    puppet_agent::install    Install the Puppet agent package
    puppet_agent::version    Get the version of the Puppet agent package installed. Returns nothing if none present.
    puppet_conf              Inspect puppet agent configuration settings
    reboot                   Reboots a machine
    reboot::last_boot_time   Gets the last boot time of a Linux or Windows system
    service                  Manage and inspect the state of services
    test                     A short description of this task
    ping                     Runs a simple ping command

To run the task on a given host simply use:
`bolt task run ping --nodes 'agent-centos.localdomain'`

!SLIDE small
# Plans

Plans are a set of tasks. They should be placed within the plans directory of a given module
/{MODULE NAME}/plans/myfirstplan.pp would translated to the following Plan name:
`{MODULE NAME}::myfirstplan`

A plan can either be written in a yaml format or using puppet language. A plan written in yaml using our ping command could look somewhat like this:

    @@@Sh
    steps:
      - task: ping
        target:
          - agent-centos.localdomain
        description: "Run a simple ping command"

Even though we could run it right now, we could also convert this into puppet language. Puppet bolt offers a subcommand that converts it for us:

    @@@Sh
    $ bolt plan convert ping.yaml
    \# WARNING: This is an autogenerated plan. It may not behave as expected.
    plan test::ping() {
      run_task('ping', ['agent-centos.localdomain'], "Run a simple ping command")
    }
